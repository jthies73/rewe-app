name: GitHub Actions Pipeline ğŸš€
run-name: ${{ github.actor }} is deploying rewe-app ğŸš€
on: [push]
jobs:
  Deploy-Rewe-Fe:
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v2
      - name: Build image
        working-directory: ./rewe-fe
        run: |
          echo "Building rewe-fe image... ğŸ—"
          docker build -t rewe-fe-image .
      - name: Deploy image
        working-directory: ./rewe-fe
        run: |
          echo "Deploying rewe-fe image ğŸš€"
          docker stop rewe-fe || true && docker rm rewe-fe || true
          docker run -d --net rewe-net --ip 172.41.0.21 --name rewe-fe rewe-fe-image
  Deploy-Rewe-Be:
    runs-on: self-hosted
    steps:
      - run: ls -al
      - run: echo "Deploying rewe-be ğŸš€"
